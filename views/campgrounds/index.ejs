<% layout('layouts/boilerplate') %>
<div class="container">
    <div id="map" style="width: 100%; height: 500px;"></div>
        <h1 class="mt-2">ALL CAMPGROUNDS</h1>
        <h2 class="mt-2 mb-3"><button> <h5><a href="/campgrounds/new">Add a CampGround</a></h5></button></h2>
        <% for (let campground of campgrounds) { %>

        <div class="shadow mb-3 p-2 "  style="height: auto; ">

            <div class="row g-0">
                <div class="col-md-3 col-12 ">
                    <% if(campground.images.length){ %>
                    <img crossorigin="anonymous" class="img-fluid rounded-start " alt="" src="<%= campground.images[0].url %>" style="height: auto; max-height: 300px;"   >
                        <% } else{%>
                    <img crossorigin="anonymous" class="img-fluid rounded-start" alt="" src="https://res.cloudinary.com/dvezwdumx/image/upload/v1687037780/YelpCamp/b0afvqiabdgzzgh1y9yv.jpg" style="height: 100%;" >
                            <% } %>
                </div>
                <div class="col-md-9 col-12">
                    <div class="card-body ms-3">
                        <h5 class="card-title"><%= campground.title%></h5>
                        <p class="card-text"><%= campground.description%></p>
                        <p class="card-text">
                            <small class="text-secondary"><%= campground.location%></small>
                        </p>
                        <a href="/campgrounds/<%= campground._id %>"><button class="btn btn-primary">View <%= campground.title %></button></a>
                    </div>
                </div>

            </div>

        </div>
</div>
    <%} %>
    <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = {features : <%-JSON.stringify(campgrounds)%>}

      </script>
<script crossorigin="anonymous" src="/javascripts/clusterMap.js"></script>


